<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Security Officer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Deca:wght@100;200;300;400;500;600;700;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="home-main.css" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <link rel="stylesheet" href="toggle/style.css">
    <link rel="stylesheet" href="modal/popup_modal.css">
    <link rel="stylesheet" href="modal/popup_guest.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.0-beta.3/iconify-icon.min.js" defer></script>



    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css" />


    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="../../user-side/sidebar/sidebar-mobile.css">
    <script src="../../user-side/sidebar/sidebar-mobile.js" defer></script>

    <script
        src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
        crossorigin="anonymous" 
        defer></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"
        defer></script>
    <script
        type="text/javascript"
        charset="utf8"
        src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"
        defer></script>

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.1/b-2.3.3/b-colvis-2.3.3/b-html5-2.3.3/b-print-2.3.3/datatables.min.css"/>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js" defer></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js" defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.1/b-2.3.3/b-colvis-2.3.3/b-html5-2.3.3/b-print-2.3.3/datatables.min.js" defer></script>

    <script src="toggle/custom_toggle.js" defer></script>
    <script src="../../dist/bundle.js" defer></script>
    <script src="./scripts/securityOfficer.js" defer></script>

    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js" defer></script>
</head>

<style>

    /* Mobile Sidebar */
    .mobile-sidebar {
        padding-right: 3em;
    }

    /* .main-container {
        width: 95%;
    } */
    #video-container {
        display: none;
        /* display: grid !important; */
        grid-template: 1fr / 1fr;
        place-items: center;

        /* width: min(100%, 500px); */
        min-width: 500px;
    }

    #video-container>* {
        grid-column: 1 / 1;
        grid-row: 1 / 1;
    }

    #placeholder {
        width: 65%;
        margin: 0 auto;
    }
    .scan-region-highlight {
        /* display: inline-block !important; */
        position: relative !important;
        width: 100%;
        height: 100%;
        left: 0 !important;
        top: 0 !important;

        /* transform: scaleX(-1) translate(-80%, 0%) !important; */
        fill: none;
        stroke: #e9b213;
        stroke-width: 4;
        stroke-linecap: round;
        stroke-linejoin: round;
        z-index: 1;
        /* margin: 0 auto !important; */
    }
</style>

<body>
    <div class="container" id="container">
        <div class="sidebar">
            <!-- title box/bulsu icon on sidebar -->
            <div class="title-box">
                <img src="bulsu.png" alt="school-logo" />
                <h1>
                    BulSU Vehicle <br />
                    Management<br />
                    System
                </h1>
            </div>

            <!-- sidebar divider -->
            <div class="sidebar-pages" id="sidebar-pages-id">
                <div class="line">
                    <hr />
                </div>
                <ul>
                    <li>
                        <a href="securityOfficer-home.html" id="menu-id">
                            <div class="sidebar-logo">
                                <iconify-icon icon="bxs:dashboard"></iconify-icon>
                            </div>
                            <div id="title-home" class="title">Home</div>
                        </a>
                    </li>
                    <li>
                        <a id="account-id">
                            <div class="sidebar-logo">
                                <iconify-icon icon="carbon:user-avatar-filled"></iconify-icon>
                            </div>
                            <div class="title" id="title-myAccount">My Account</div>
                        </a>
                    </li>
                    <li>
                        <a id="logs-id">
                            <div class="sidebar-logo">
                                <iconify-icon icon="heroicons:newspaper-solid"></iconify-icon>
                            </div>
                            <div class="title" id="title-logs">Logs</div>
                        </a>
                    </li>
                    <!-- <li>
                        <a href="#" id="menu-id">
                            <div class="sidebar-logo">
                                <iconify-icon icon="eva:log-out-outline"></iconify-icon>
                            </div>
                            <div class="title">Logout</div>
                        </a>
                    </li> -->
                </ul>
                <!-- <li>
                    <a href="securityOfficer-home.html" id="menu-id">
                        <div class="sidebar-logo">
                            <iconify-icon icon="bxs:dashboard"></iconify-icon>
                        </div>
                        <div id="title-home" class="title">Home</div>
                    </a>
                </li>
                <li>
                    <a id="account-id">
                        <div class="sidebar-logo">
                            <iconify-icon icon="carbon:user-avatar-filled"></iconify-icon>
                        </div>
                        <div class="title" id="title-myAccount">My Account</div>
                    </a>
                </li>

                <li>
                    <a id="logs-id">
                        <div class="sidebar-logo">
                            <iconify-icon icon="heroicons:newspaper-solid"></iconify-icon>
                        </div>
                        <div class="title" id="title-logs">Logs</div>
                    </a>
                </li>
                <div class="line1">
                    <hr />
                </div>
                <div class="logout">
                    <li>
                        <a href="#" id="menu-id">
                            <div class="sidebar-logo">
                                <iconify-icon icon="eva:log-out-outline"></iconify-icon>
                            </div>
                            <div class="title">Logout</div>
                        </a>
                    </li>
                </div> -->
            </div>
        </div>

        <nav class="mobile-nav">
            <ul>
                <li>
                    <a href="securityOfficer-home.html" id="menu-id">
                        <div id="title-home" class="title">Home</div>
                    </a>
                </li>
                <li>
                    <a id="account-id-mobile" style="cursor: pointer;">
                        <div class="title" id="title-myAccount">My Account</div>
                    </a>
                </li>
                <li>
                    <a id="logs-id-mobile" style="cursor: pointer;">
                        <div class="title" id="title-logs">Logs</div>
                    </a>
                </li>
            </ul>

            <div class="mobile-nav-buttons">
                <a href="../index.html">Logout</a>
            </div>
        </nav>

        <div class="sidebar mobile-sidebar">
            <header style="margin-bottom: 1em;">
                <div class="main-sidebar">
                    <h2>BulSU</h2>
                    <button class="hamburger">
                        <div class="bar"></div>
                    </button>
                </div>
            </header>
            <nav class="mobile-nav">
                <a href="user-home.html">Home</a>
                <a href="user-account.html">My Account</a>
                <a href="user-vehicle.html">Vehicles</a>
                <a href="user-logs.html">Logs</a>
                <a href="user-announcements.html">Announcements</a>
                <div class="mobile-nav-buttons">
                    <a href="../index.html">Logout</a>
                </div>
            </nav>
        </div>

        <div class="main-container" id="main-container">
            <div class="header-container">
                <div class="header">
                    <!-- security guard box  -->
                    <div class="guard_box">
                        <img src="../images/icons/sg-icon.png" alt="sg" />
                        <div class="guard-title">
                            <div class="name-sg">-----</div>
                            <div class="secTitle">Security Officer</div>
                        </div>
                    </div>

                    <!-- box of navigation icons -->
                    <div class="utility">
                        <!-- <div class="nav-logo">
                            <iconify-icon icon="carbon:notification-filled"></iconify-icon>
                        </div>
                        <div class="nav-logo">
                            <iconify-icon icon="gg:dark-mode"></iconify-icon>
                        </div>
                        <div class="nav-logo">
                            <iconify-icon icon="octicon:screen-full-16"></iconify-icon>
                        </div> -->
                        <div class="nav-logo" id="logout">
                            <iconify-icon icon="majesticons:logout-half-circle"></iconify-icon>
                        </div>
                        <!-- <div class="uti-divider">
                            <iconify-icon icon="fluent:divider-short-16-filled"></iconify-icon>
                        </div>
                        <div class="nav-logo">
                            <iconify-icon icon="ci:settings-filled"></iconify-icon>
                        </div> -->
                        
                    </div>
                </div>
            </div>

            <!-- search area -->
            <!-- 1 -->

            <!-- content area -->
            <div id="content-container" class="content-container">
                <div id="content" class="content-area" style="display: none">
                    <div class="content1">
                        <div class="output-box">
                            <p class="output-text">Output</p>
                        </div>
                    </div>

                    <div class="divider">
                        <div class="vertical-line"></div>
                    </div>

                    <div class="content2">
                        <div class="mobileGate">Gate 4</div>
                        <div class="scanner">
                            <iconify-icon icon="fluent:barcode-scanner-20-regular">
                            </iconify-icon>
                        </div>

                        <div class="btn-scan-area">
                            <a onclick="loadSecurityOfficerResult()">
                                <button id="btn-scan" class="btn-scan" type="button">
                                    Scanning ready
                                </button>
                            </a>
                        </div>

                        <div class="scan-icon">
                            <div class="usbcameraicon">
                                <img src="../images/icons/usbCamera.png" alt="" id="usbcam" />
                            </div>
                            <p class="gate">Gate 4</p>

                            <!-- mobile buttons -->
                            <div class="mobile-btn-scan-area">
                                <button onclick="loadSecurityOfficerResult()" id="btn-mobile-scan" class="mobile-scan"
                                    type="button">
                                    Scanning ready
                                </button>
                            </div>
                            <div class="mobileVisitor">
                                <button onclick="loadAddVisitor()" id="btn-visitor" type="button">
                                    Visitor?
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <style>
                    .qr-scanning .qr-scanning-buttons {
                        display: flex;
                        gap: 1em;
                        /* font-size: 1.5em; */
                    }
                    .qr-scanning .qr-scanning-buttons > button {
                        font-size: 1.25em;
                    }

                    .dropdown-gate-number {
                        margin: 1em 0;
                    }
                    .dropdown-gate-number p {
                        font-weight: bold;
                        font-size: 1.15em;
                        margin-bottom: .5em;
                    }

                </style>
                <div class="qr-scanning">
                    <div class="qr-scanning-buttons">
                        <button class="btn-scan" id="start-button">Start</button>
                        <button class="btn-scan" id="stop-button">Stop</button>
                    </div>

                    <div class="dropdown-gate-number">
                        <p>Gate Number:</p>
                        <select name="select-gate-number" id="select-gate-number">
                            <option value="1">Gate #1</option>
                            <option value="2">Gate #2</option>
                            <option value="3">Gate #3</option>
                            <option value="4">Gate #4</option>
                        </select>
                    </div>
                    <span id="cam-qr-result-timestamp" style="display: none;"></span>
                    <h1>Scan from Webcam:</h1>
                    <div id="placeholder">
                        <div id="camera-icon"></div>
                        <p class="message">Please allow the system to use the camera or <br/>just simply restart camera instance.</p>
                    </div>
                    <div id="video-container">
                        <video id="qr-video"></video>
                        <div style="display: none; pointer-events: none" class="scan-region-highlight">
                            <svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none">
                                <path
                                    d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21">
                                </path>
                            </svg>
                        </div>
                    </div>
                    
                    <style>
                        .scanning-settings {
                            margin: 1em;
                        }
                        .scanning-settings :is(select, :not(input[type="checkbox"])) {
                            width: 100%;
                            padding: .5em;
                        }

                        .scanning-settings .selection {
                            padding: 0 !important;
                        }

                        .scanning-settings canvas {
                            width: 200px !important;
                            height: 200px;
                        }
                    </style>

                    <div class="scanning-settings">
                        <p class="scanning-title">QR Scanning Settings</p>
                        <div class="highlight-section">
                            <p><b>Highlight Style</b></p>
                            <div class="selection">
                                <div class="select">
                                    <select name="b" id="scan-region-highlight-style-select">
                                        <option value="default-style" selected="">Default style</option>
                                        <option value="example-style-1">Example custom style 1</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="selection-toggle">
                            <div class="input-row">
                                <div class="toggle">
                                    <input id="show-scan-region" type="checkbox">
                                    <span class="slider"></span>
                                </div>
                                <p class="label">Show scan region canvas</p>
                            </div>
                            <canvas style="display: none;"></canvas>
                        </div>
                        <div>
                            <div class="select">
                                <select id="inversion-mode-select" autocomplete="off">
                                    <option value="original" selected="">
                                        Scan original (dark QR code on bright background)
                                    </option>
                                    <option value="invert">
                                        Scan with inverted colors (bright QR code on dark background)
                                    </option>
                                    <option value="both">Scan both</option>
                                </select>
                            </div>
                        </div>
                
                        <div>
                            <p><b>Preferred camera:</b></p>
                            <div class="select">
                                <select id="cam-list">
                                    <option value="environment" selected="">
                                        Environment Facing (default)
                                    </option>
                                    <option value="user">User Facing</option>
                                </select>
                            </div>
                        </div>
                        <div class="camera-permissions" style="padding: 0; margin: 0;">
                            <div>
                                <p><b>Device has camera: </b></p>
                                <div class="main-has-camera">
                                    <div class="checkbox focus">
                                        <input type="checkbox">
                                        <span class="check"><i class="checked-icon" data-feather="check"></i></span>
                                    </div>
                                    <p id="cam-has-camera">true</p> 
                                </div>
                            </div>
                
                            <div>
                                <p><b>Camera has flash: </b></p>
                                <div>
                                    <div style="margin: 0; display: flex; flex-direction: column;">
                                        <span style="display: none;" id="cam-has-flash"></span>
                                        <button id="flash-toggle">
                                            Flash: <span id="flash-state">off</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <div>
                            <p style="font-size: 1.5em; font-weight: bold">Detected QR code:</p>
                            <p id="cam-qr-result"><i>None</i></p>
                        </div>
                    </div>

                </div>


                <style>
                    #start-button, #stop-button {
                        padding: 1em;
                        width: 100%;
                        margin: 1em 0;
                    }
                    h3 {
                        margin: 1em;
                        text-align: center;
                    }

                    .button-popups {
                        display: flex;
                        flex-direction: column;
                        gap: 1em;
                        margin: 1em 0;
                    }
                    #popup, #popup-guest {
                        padding: 1em 0;
                        /* height: 50px; */
                    }


                    .scanned-information-caption {
                        display: flex;
                        justify-content: space-between;
                        font-size: 1.2em;
                        margin-bottom: 1em;
                    }
                    .scanned-information p {
                        font-weight: bold;
                    }
                    .scanned-information span {
                        padding-left: 1em;
                    }
                </style>
                <div id="ex1" class="modal">
                    <div class="scanned-information">
                        <div class="scanned-information-caption">
                            <!-- <p>Scanned Successfully</p> -->
                            <p class="scanned-message">QR scanned successfully.</p>
                            <!-- <div class="scanned-type"><p>Time In</p></div> -->
                        </div>
                        <div class="scanned-result">
                            <div class="user-scanned-vehicle" style="display: none;">
                                <p>Vehicle</p>
                                <img src="#" alt="" class="user-scanned-vehicle-value">
                            </div>
                            <div class="user-scanned-uid">
                                <p>User UID</p>
                                <span class="user-scanned-uid-value">asdfdasfd187423</span>
                            </div>
                            <div class="user-scanned-date">
                                <p>Date of Snapshot</p>
                                <span class="user-scanned-date-value">Wed Oct 26 2022 17:35:49 GMT+0800 (Taipei Standard Time)</span>
                            </div>
                        </div>
                    
                        <!-- 
                            (new Date(time_posted * 1000)).toLocaleString();
                            // -> "Wed Aug 22 2012 11:14:21 GMT+0300 (Jerusalem Daylight Time)"
            
                            (new Date(time_posted * 1000)).toLocaleDateString();
                            // -> "Wednesday, August 22, 2012"
                         -->
                        <h3>Personal Information</h3>
                        <div class="user-personal-info">
                            <div class="user-fullname">
                                <p>Name</p>
                                <span class="user-fullname-value">Mandela, Jackson F.</span>
                            </div>
                            <div class="user-uid">
                                <p>User Type</p>
                                <span class="user-type-value">Personnel</span>
                            </div>
                        </div>
                    
                        <h3>Vehicle Information</h3>
                        <div class="user-vehicle-info">
                            <div class="vehicle-model">
                                <p>Vehicle Model</p>
                                <span class="user-model-value">Honda Honk Honk 123</span>
                            </div>
                            <div class="user-platenum">
                                <p>Plate Number</p>
                                <span class="user-platenum-value">ABC 1234</span>
                            </div>
                        </div>
                    </div>
                    <a href="" class="middle-icon"></a>
                </div>

                <div id="ex2" class="modal" style="display: none;">
                    <p class="guest-caption">Add Visitor Information</p>
                    <div class="guest-container" style="padding-right: 1em;">
                        <div class="guest-search">
                            <!-- <form id="guest-search-information"> -->
                                <div>
                                    <p class="guest-lookup-caption">Plate Number (Lookup): </p>
                                    <!-- <div class="guest-search-input">
                                        <input id="autocomplete-guest" />
                                    </div> -->

                                    <div class="ui-widget">
                                        <label for="tags">Tags: </label>
                                        <input id="tags">
                                    </div>
                                </div>
                            <!-- </form> -->
                        </div>
                        <hr>
                        <form id="guest-add-information">
                            <div class="guest-add-fullname">
                                <p class="guest-fullname-caption">Name</p>
                                <input type="text" name="guest-add-fname" placeholder="First Name" required="required" value="">
                                <input type="text" name="guest-add-mname" placeholder="Middle Name (Optional)" value="">
                                <input type="text" name="guest-add-lname" placeholder="Last Name" required="required" value="">
                            </div>
                            <div class="guest-add-model">
                                <p class="guest-model-caption">Vehicle Model</p>
                                <input type="text" name="guest-add-vehiclemodel" id="">
                            </div>
                            <div class="guest-add-vehicle">
                                <p class="guest-platenum-caption">Plate Number</p>
                                <input type="text" name="guest-add-platenum" id="" required="required" placeholder="">
                            </div>
                            <input type="submit" name="guest-add-submit" value="Submit" style="display: none;">
                            <input type="submit" value="Submit Visitor Information">
                            <!-- <p>Data to be submitted: </p>
                            <ul style="list-style-type: circle; margin-left: 1em;">
                                <li>Full Name</li>
                                <li>Vehicle Model</li>
                                <li>Plate Number</li>
                                <li>Security (Scanner)</li>
                                <li>Gate</li>
                                <li>Timestamp (Time In and Time Out)</li>
                            </ul> -->
                        </form>
                    </div>
                    <!-- <button id="guest-submit-data">Add Guest Data</button> -->
                </div>

                <div class="button-popups">
                    <!-- <button id="popup">Popup</button> -->
                    <button id="popup-guest" style="font-size: 1.25em;">Add Visitor Information</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>