<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="admin.js" defer></script> -->
    <script
        src="https://code.jquery.com/jquery-3.6.1.js"
        integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
        crossorigin="anonymous" defer>
    </script>
    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bayon&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="user-home.css">
    <link rel="stylesheet" href="user-home-mods.css">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    
    <title>Welcome To BulSU VMS</title>
</head>
<!-- 
    Things to do: 
    1. Layout of the dashboard:
        - sidebar
        - main content
        - table layout
        - pie chart 
 -->
<body>
    <div class="container user-main">
        <div class="sidebar">
            <div class="admin-details-box">
                <div class="sidebar-logo school-logo-container">
                    <img src="bulsu-logo.png" alt="" id="bsuLogo">
                </div>
                <div>
                    <p>BulSU Vehicle<br>Management<br>System</p>
                </div>
            </div>

            <div class="horizontal-box">
                <hr>
            </div>
            <!-- <div class="horizontal-box">
                <div class="horizontal-line"></div>
            </div> -->
            <ul>
                <li>
                    <a href="user-home.html" class="menu">
                    <div class="sidebar-icon-1"></div>
                    <div class="title">Home</div>
                    </a>
                </li>
                <li>
                    <a href="user-account.html" class="menu">
                        <div class="sidebar-icon-2"></div>
                        <div class="title">My Account</div>
                    </a>
                </li>
                <li>
                    <a href="#" class="menu">
                        <div class="sidebar-icon-3"></div>
                        <div class="title">Vehicles</div>
                    </a>
                </li>
                <li>
                    <a href="#" class="menu">
                        <div class="sidebar-icon-4"></div>
                        <div class="title">Logs</div>
                    </a>
                </li>
                <li>
                    <a href="#" class="menu">
                        <div class="sidebar-icon-5"></div>
                        <div class="title">Announcements</div>
                    </a>
                </li>
            </ul>
            <div class="horizontal-box">
                <hr>
            </div>
        </div>
        <div class="right-container">
            <div class="header">
                    <div class="logo-holder user-holder">
                        <div class="dashboard-logo"><iconify-icon icon="ic:baseline-account-circle" style="color: white;" width="48" height="48"></iconify-icon></div>
                        <div class="profile-box">
                            <div class="fullname">DELA CRUZ, Juan</div>
                            <div class="category">Resident</div> <!-- Resident / Visitor -->
                        </div>
                    </div>
                    <div class="util-holder">
    
                        <div class="search-box">
                            <input class="search-icon" type="text" id="search" placeholder="Type here to see the magic!">
                        </div>
    
                         <div class="utils">
                            <div class="util-icon-notif util-box">
                                
                            </div>
                            <div class="util-icon-theme util-box">
                                
                            </div>
                            <div class="util-icon-fullscr util-box">
                                
                            </div>
                            <div class="util-icon-settings util-box">
                                
                            </div>
                         </div>   
    
                    </div>
            </div>
            <div id="content" class="content user-content " >
                <div class="welcome-box">
                    <div class="welcome-title-box">
                        <div class="welcome-title-holder">
                            <div class="welcome-icon sidebar-logo"><iconify-icon icon="fluent:megaphone-loud-20-filled" style="color: white;" width="36" height="36"></iconify-icon></div>
                            <div class="welcome-title">Welcome to BulSU VMS</div>
                        </div>
                    </div>
                    <div class="welcome-message">
                        Dashboards are a wonderful way to monitor your logs, check registered vehicle, provide information for logging, and more.

                    </div>
                </div>
                <div class="tips-box">
                    <div class="tips-title">TIPS: </div>
                    <div class="add-new-box items-flex">
                        <div class="tips-items">
                            <div class="tip-1">add new vehicle</div>
                            <a href="#" class="take-me">
                                Take me there
                            </a>
                        </div>
                    </div>
                    <div class="add-twoF-box items-flex">
                        <div class="tips-items">
                            <div class="tip-2">Fill additional personal information</div>
                            <a href="#" class="take-me">
                                Take me there
                            </a>
                        </div>
                    </div>
                    <div class="fill-other-box items-flex">
                        <div class="tips-items">
                            <div class="tip-3">Fill additional vehicle information</div>
                            <a href="#" class="take-me">
                                Take me there
                            </a>
                        </div>
                    </div>
                </div>
                <div class="qr-code">
                    <div class="qr-code-image">
                        <img src="bulsu-logo.png" alt="testing" download="download">
                    </div>
                    <div class="qr-code-vehicle-info">
                        <div class="qr-code-dropdown">
                            <div class="qr-code-dropdown-clickable">
                                <img src="https://api.iconify.design/fluent/vehicle-car-28-filled.svg?color=white" alt="vehicle icon">
                                <div>
                                    <p>Vehicle #1</p>
                                    <p>Toyota Raize 2022, Private</p>
                                </div>
                                <img src="https://api.iconify.design/gridicons/dropdown.svg?color=white" alt="dropdown icon">
                            </div>
                            <div class="popup-dropdown">
                                <ul>
                                    <li>
                                        Vehicle #1 | Toyota Raize 2022, Private
                                    </li>
                                    <li>
                                        Vehicle #2 | Other Vehicle, Private
                                    </li>
                                    <li>
                                        Vehicle #3 | Informations, Private
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="qr-code-information">
                            <p>
                                Lorem ipsum dolor sit amet. This is a description of the that the user provided. Never gonna give up, never gonna let you down
                            </p>
                        </div>
                        <div class="qr-code-quick-actions">
                            <button>
                                <img src="https://api.iconify.design/fluent/shifts-activity-24-filled.svg?color=white" alt="recents">
                                Recent Activity
                            </button>
                            <button>
                                <img src="https://api.iconify.design/bx/link.svg?color=white" alt="linkages">
                                Linkages
                            </button>
                            <button>
                                <img src="https://api.iconify.design/bi/cloud-check-fill.svg?color=white" alt="registration">
                                Account Registration Status
                            </button>
                            <button>
                                <img src="https://api.iconify.design/icon-park-solid/update-rotation.svg?color=white" alt="update info.">
                                Update Information
                            </button>
                        </div>
                        <div class="qr-code-common-actions">
                            <!-- <button class="save">
                                <img src="https://api.iconify.design/bxs/save.svg?color=white" alt="">
                                Save
                            </button> -->
                            <a class="save saveQR" download="download" >
                                <img src="https://api.iconify.design/entypo/eye.svg?color=white" alt="">
                                Save
                            </a>
                            <a class="viewQR" href="#ex1" rel="modal:open">
                                <img src="https://api.iconify.design/entypo/eye.svg?color=white" alt="">
                                View QR Code
                            </a>
                            <!-- <button class="viewQR" href="#ex1" rel="modal:open">
                                <img src="https://api.iconify.design/entypo/eye.svg?color=white" alt="">
                                View QR Code
                            </button> -->
                            <!-- <p><a href="#ex1" rel="modal:open">Open Modal</a></p> -->
                        </div>
                    </div>
                </div>
                <!-- <div class="qrbox"></div> -->
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="ex1" class="modal">
        <div>
            <img class="modal-qrcode" src="" alt="">
        </div>
            
    </div>
      
      <!-- Link to open the modal -->
    <!-- <p><a href="#ex1" rel="modal:open">Open Modal</a></p> -->
</body>

<script src="../dist/bundle.js"></script>
<script src="FileSaver.js"></script>
<script>
    
    let dropdown = document.querySelector('.qr-code-dropdown-clickable');
    let popup = document.querySelector('.popup-dropdown');
    let buttons = document.querySelectorAll('.qr-code .qr-code-common-actions > button');
    let getQRCodeImage = document.querySelector("qr-code-image img");

    let bool = false;
    dropdown.addEventListener('click', () => {
        bool = !bool;
        if(bool) {
            popup.style.display = "block";
    
            buttons.forEach((btn) => {
                btn.style.pointerEvents = "none";
            });
        }
        else {
            popup.style.display = "none";
    
            buttons.forEach((btn) => {
                btn.style.pointerEvents = "auto";
            });
        }
    });


    // Using fetch

    let saveImage = document.querySelector(".save");
    saveImage.addEventListener('click', () => {
        
    });
    async function downloadImage(imageSrc) {
        const image = await fetch(imageSrc)
        const imageBlog = await image.blob()
        const imageURL = URL.createObjectURL(imageBlog)

        const link = document.createElement('a')
        link.href = imageURL
        link.download = 'qrcode.png'
        document.body.appendChild(link)
        link.click()
        document.body.removeChild(link)
    }

    // let saveImage = document.querySelector(".save");
    // saveImage.addEventListener('click', () => {
        
    //     const reader = new FileReader();
    //     reader.addEventListener("load", function() {
    //         console.log(reader.result); //print the Blob
    //     });
    //     reader.readAsDataURL();
    //     // var blob = new Blob()
    //     // saveAs(blob, "hello world.PNG");
    // });
    // dropdown.addEventListener("mouseout", () => {
    //     popup.style.display = "none";
    //     console.log("click")

    //     buttons.forEach((btn) => {
    //         btn.style.pointerEvents = "auto";
    //     });
    // });

</script>
</html>